{{ define "content" }}
<div class="h-full flex flex-col p-6">
    <div class="flex-1 flex flex-col items-center justify-center text-center mb-8">
        <div class="w-16 h-16 bg-brand-500/10 rounded-2xl flex items-center justify-center mb-6 border border-brand-500/20">
            <img src="/static/pipehook.svg" class="w-10 h-10" alt="PipeHooks">
        </div>
        <h1 class="text-2xl font-bold text-white mb-2 tracking-tight">Manage Your Webhooks</h1>
        <p class="text-slate-400 text-sm mb-6 max-w-xs">Create and switch between multiple webhook endpoints.</p>

        <form action="/new" method="POST">
            <button type="submit" class="px-6 py-2.5 bg-brand-600 hover:bg-brand-500 text-white text-sm font-semibold rounded-lg transition-all shadow-lg shadow-brand-600/10 flex items-center gap-2">
                <i class="fas fa-plus text-[10px]"></i>
                Create New Endpoint
            </button>
        </form>
    </div>

    {{ if .Endpoints }}
    <div class="max-w-2xl w-full mx-auto">
        <h2 class="text-xs font-bold text-slate-500 uppercase tracking-[0.2em] mb-4">Your Endpoints</h2>
        <div class="space-y-2">
            {{ range .Endpoints }}
            <a href="/{{ .ID }}" class="flex items-center justify-between p-4 rounded-lg bg-slate-900 border border-l-4 transition-all group home-endpoint-item" data-endpoint-id="{{ .ID }}">
                <div class="flex items-center gap-4 flex-1 min-w-0">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center shrink-0 home-endpoint-icon" data-endpoint-id="{{ .ID }}">
                        <div class="w-2 h-2 rounded-full home-endpoint-dot" data-endpoint-id="{{ .ID }}"></div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-sm font-mono truncate home-endpoint-text" data-endpoint-id="{{ .ID }}">{{ .ID }}</span>
                            {{ if .Alias }}
                            <span class="text-xs text-slate-500">({{ .Alias }})</span>
                            {{ end }}
                        </div>
                        <div class="flex items-center gap-3 text-[10px] text-slate-500">
                            <span>Created <span data-timestamp="{{ .CreatedAt.Format "2006-01-02T15:04:05Z07:00" }}">{{ .CreatedAt.Format "Jan 02, 2006" }}</span></span>
                            <span class="w-1 h-1 rounded-full bg-slate-700"></span>
                            <span>Expires {{ .ExpiresAt.Format "Jan 02, 2006" }}</span>
                        </div>
                        <code class="text-[10px] text-slate-600 font-mono mt-1 block truncate">https://{{ $.Host }}/h/{{ .ID }}</code>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-[10px] text-slate-600 group-hover:text-brand-500 transition-colors ml-4 shrink-0"></i>
            </a>
            {{ end }}
        </div>
    </div>
    {{ else }}
    <div class="max-w-sm mx-auto text-center">
        <div class="p-8 rounded-lg bg-slate-900/50 border border-slate-800">
            <i class="fas fa-inbox text-3xl text-slate-700 mb-3"></i>
            <p class="text-sm text-slate-500">No endpoints yet. Create your first one above!</p>
        </div>
    </div>
    {{ end }}
</div>

<script>
    // Apply endpoint colors on home page
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.home-endpoint-item').forEach(item => {
            const endpointId = item.getAttribute('data-endpoint-id');
            if (endpointId && typeof getEndpointColor === 'function') {
                const color = getEndpointColor(endpointId);
                if (color) {
                    item.classList.add(color.border);
                    const dot = item.querySelector('.home-endpoint-dot[data-endpoint-id="' + endpointId + '"]');
                    const icon = item.querySelector('.home-endpoint-icon[data-endpoint-id="' + endpointId + '"]');
                    const text = item.querySelector('.home-endpoint-text[data-endpoint-id="' + endpointId + '"]');
                    if (dot) {
                        dot.classList.add(color.accent);
                    }
                    if (icon) {
                        icon.classList.add(color.bg, 'border', color.border);
                    }
                    if (text) {
                        text.classList.add(color.text);
                    }
                }
            }
        });
    });
</script>
{{ end }}
